<script>
(function(){
    try {
        var saved = null;
        try { saved = localStorage.getItem('theme'); } catch(e) { saved = null; }
        var prefers = (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches);
        var theme = (saved === 'dark' || saved === 'light') ? saved : (prefers ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
        if (document.body) {
            document.body.classList.remove('light-theme','dark-theme');
            document.body.classList.add(theme + '-theme');
        }
    } catch (e) { /* fail silently */ }
})();
</script>
